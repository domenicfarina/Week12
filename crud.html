<html>
<head>
    <title>Crud</title>
</head>

<body>
    <a href="new.html">Click here to add new thing</a>
    <div id="food"></div>
	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
       
	<script>
        
        function displayFoodOnPage() {
				var food = JSON.parse(localStorage.getItem('food'));
				
				// TODO .clear() the pets div so that we 
				// update the page with the content from
				// localstorage
				$("#food").empty();
				$(food).each(function(index) {
					$("#food").append(`<p> <a href = "edit.html?id=${index}"> ${this.food_name} - ${this.food_place} - ${this.food_delivery}</a><button data-index="${index}">Delete</button></p>`);			
				});
			}
			function delFood(food_index){
				var foodArray = JSON.parse(localStorage.getItem("food"));
				foodArray.splice(food_index, 1)
				localStorage.setItem('food', JSON.stringify(foodArray));

			}
			//ar removed_student = remaining_students.splice(random_index, 1)
			displayFoodOnPage();
			$("button").click(function(){
				var index = $(this).data("index")
				delFood(index);
				displayFoodOnPage();
			})

    </script>
</body>
</html>